var setup = {
    optra : {
        hood : {
            title: "The Hood",
            body : "Engine: DOHC 4 CYL VVT<br>1.5L (1485cc) Engine Capacity<br>Max. Power (hp@rpm) 110@5800<br>Max.Torque (N.m@rpm) 146.5@3600 - 4000<br>Automatic 6 Speed Transmission<br>Fuel Tank 54L<br>Engine Immobilizer",
            image : "img/Optra/hotspot/front-view/Hood_Front.jpg",
            alt : "Optra Sedan Photo: Hood Interior"
        },
        grille : {
            title: "The Grille",
            body : "Chrome Front Grille",
            image : "img/Optra/hotspot/front-view/Grille_Front.jpg",
            alt : "Optra Sedan Photo: Front Grille"
        },
        headlights : {
            title: "تيم فرونت",
            body : "هذا النص هومثال على نص يمكن ان يستبدل",
            image : "img/Optra/hotspot/front-view/Headlights_Front.jpg",
            alt : "Optra Sedan Photo: Headlamps"
        },
        side_mirrors : {
            title: "The Side Mirrors",
            body : "Power Mirrors with Turn Signal Indicator",
            image : "img/Optra/hotspot/side/SideMirror_Side.jpg",
            alt : "Optra Sedan Photo: Side Mirror"
        },
        rear_lights : {
            title: "The Rear Lights",
            body : "Rear Fog Lights",
            image : "img/Optra/hotspot/side/Rearlights_Side.jpg",
            alt : "Optra Sedan Photo: Rearlights"
        },
        sunroof : {
            title: "The Sunroof",
            body : "Slide and Tilt Power Sunroof",
            image : "img/Optra/hotspot/side/Sunroof_Side.jpg",
            alt : "Optra Sedan Photo: Power Sunroof"
        },
        seating : {
            title: "The Seating",
            body : "Leather Seats<br>Height Adjustable Driver Seats<br>Rear Arm Rest with Cup Holder<br>Front Central Armrest<br>Rear Seat Split Folding 60:40 with 2 Headrests",
            image : "img/Optra/hotspot/interior/Seating_Interior.jpg",
            alt : "Optra Sedan Photo: Interior Seating"
        },
        dashboard : {
            title: "The Dashboard",
            body : "3 Spoke Sporty Tiltable Steering Wheel<br>Power Steering<br>2 Front Airbags<br>Board Computer<br>Steering Wheel Audio Controls<br>4 Speakers<br>Radio CD + USB with AUX-in Connection<br>Bluetooth Mobile Pairing",
            image : "img/Optra/hotspot/interior/Dashboard_Interior.jpg",
            alt : "Optra Sedan Photo: FDashboard"
        },
        wheel : {
            title: "The Wheels",
            body : "6 Jx15 Alloy Wheels<br>195/60R15 Tires<br>Anti-Lock Braking System (ABS)<br>Electronic Brakeforce Distribution (EBD)",
            image : "img/Optra/hotspot/side/Wheels_Side.jpg",
            alt : "Optra Sedan Photo: Wheels"
        },
        trunk : {
            title: "The Trunk",
            body : "Remote Keyless Entry with Trunk Opening<br>Trunk Capacity 405L<br>Rear Parking Assist",
            image : "img/Optra/hotspot/rear/Trunk_Rear.jpg",
            alt : "Optra Sedan Photo: Trunk Interior"
        }

    },

    captiva : {
        headlamps : {
            title: "The Headlights",
            body : "LED Daytime Running Headlamps<br>Headlamps Leveling<br>Follow Me Home Feature<br>Front Parking Sensors<br>Front Fog Lamps<br>Fog Lamps Steering Assist Function<br>Chrome Grille",
            image : "img/Captiva/hotspot/front-view/Headlights_Front.jpg",
            alt : "Captiva SUV Crossover Photo: Headlamps"
        },
        hood : {
            title: "The Hood",
            body : "1.5L DOHC Turbo 4 CYL with DVCP<br>Engine Capacity (cc) 1450<br>Max. Power (hp@rpm) 148@5200<br>Max. Torque (N.m@rpm) 255@1600-3600<br>Fuel Consumption 8.4L /100 km<br>Transmission CVT with 5 Driving Modes and 8 Simulated Manual Shifts<br>Underhood Covers<br>Engine Immobilizer",
            image : "img/Captiva/hotspot/front-view/Hood_Front.jpg",
            alt : "Captiva SUV Crossover Photo: Engine"
        },
        tire : {
            title: "The Wheels",
            body : "215/60 R17 Tires<br>17â€™â€™ Dual Color Alloy Wheels<br>Anti-Lock Braking System (ABS)<br>Electronic Brake Distribution (EBD)<br>Hydraulic Brake assist system (HBA)<br>Electronic Parking brakes<br>Electronic Stability Control (ESC)<br>Traction Control<br>Hill Start Assist<br>Multi - Link Suspension<br>Automatic Vehicle Holding system (AVH)",
            image : "img/Captiva/hotspot/side-view/Wheels_Side.jpg",
            alt : "Captiva SUV Crossover Photo: Wheels"
        },
        steering_wheel : {
            title: "The Steering wheel",
            body : "Leather Steering Wheel<br>Tiltable and Multifunction Steering Wheel<br>Cruise Control<br>Electric Power Steering<br>Electric Air Condition<br>Piano Key Control Zone<br>4 Airbags",
            image : "img/Captiva/hotspot/Interior/Dashboard_Interior.jpg",
            alt : "Captiva SUV Crossover Photo: Driver Information Center"
        },
        dashboard : {
            title: "The Dashboard",
            body : "7\" Colored Driver Information Center Display with:<br>- Digital Speedometer<br>- Tire Pressure & Temperature Monitoring System<br>- Fuel Consumption Indicator",
            image : "img/Captiva/hotspot/Interior/DC_Interior.jpg",
            alt : "Captiva SUV Crossover Photo: Dashboard"
        },
        side_mirror : {
            title: "The Side Mirrors",
            body : "Power Adjust and Heated Mirrors with LED Turn Signals<br>Power & Remote Folding Mirrors",
            image : "img/Captiva/hotspot/side-view/Sidemirror_side.jpg",
            alt : ""
        },
        sunroof : {
            title: "The Sunroof",
            body : "Electric One-Touch Sunroof",
            image : "img/Captiva/hotspot/side-view/Sunroof_Side.jpg",
            alt : "Captiva SUV Crossover Photo: Power Sunroof"
        },
        rear_mirror : {
            title: "The Rear View Mirror",
            body : "Rear View Mirror with Outlet for Data Record Connection",
            image : "img/Captiva/hotspot/Interior/Rearview_Interior.jpg",
            alt : "Captiva SUV Crossover Photo: Rearview Mirror"
        },
        keyless : {
            title: "The Stop/Start Button",
            body : "Start Push Button<br>Remote Keyless Entry",
            image : "img/Captiva/hotspot/Interior/Push_Interior.jpg",
            alt : "Captiva SUV Crossover Photo: Start Push Button"
        },
        touchscreen : {
            title: "The Touchscreen",
            body : "8\" Colored Touchscreen<br>Apple CarPlay<br>Bluetooth Audio Streaming<br>6 Speakers<br>Front and Rear USB Ports",
            image : "img/Captiva/hotspot/Interior/Touchscreen_Interior.jpg",
            alt : "Captiva SUVCrossover Photo:Touchscreen"
        },
        seating : {
            title: "The Seating",
            body : "7 Seats<br>Leatherette Seats<br>Driver 6-Way Power Adjust<br>Air Condition Rear Vents & Ducts<br>2nd Row Seats Reclining & Sliding<br>ISOFIX<br>",
            image : "img/Captiva/hotspot/Interior/Seats_Interior.jpg",
            alt : "Captiva SUV Crossover Photo: Interior Seating"
        },
        rear_camera : {
            title: "The Rear Camera",
            body : "Rear View Camera with Dynamic Lines",
            image : "img/Captiva/hotspot/rear-view/Camera_Rear.jpg",
            alt : "Captiva SUV Crossover Photo: Rear Vision Camera"
        },
        trunk : {
            title: "The Trunk",
            body : "1051L Max Cargo<br>Rear Bench Split Folding Seats",
            image : "img/Captiva/hotspot/rear-view/Trunk_Rear.jpg",
            alt : "Captiva SUV Crossover Photo: Interior trunk Space"
        },
        rear_lights : {
            title: "The Rear Features",
            body : "LED Tail Lamps<br>Rear Fog Lamps<br>Emergency Rear Bumper Lights with Trunk Opening<br>Rear Wiper & Washer<br>Rear Parking Sensors",
            image : "img/Captiva/hotspot/rear-view/Rearlights_Rear.jpg",
            alt : "Captiva SUV Crossover Photo: Rear-lights"
        }
    },
    malibu : {
        headlight : {
            title: "The Headlights",
            body : "LED Headlamps<br>LED Daytime Running Light (Separate Cavity)<br>Automatic Headlamps Leveling<br>Automatic Headlamps Control (On/Off)<br>Front Parking Sensors",
            image : "img/Malibu/hotspot/front-view/Headlights_Front.jpg",
            alt : "Malibu Midsize Sedan Photo:Headlamps"
        },
        hood : {
            title: "مؤسسة اوامر الشبكة",
            body : "هذا النص هو مثال على على نص يمكن ان يستبدل",
            image : "img/Malibu/hotspot/front-view/Hood_Front.jpg",
            alt : "Malibu Midsize Sedan Photo:Hood Interior"
        },
        rearlights : {
            title: "The Rearlights",
            body : "LED Tail Lamp<br>Rear Fog Lamps",
            image : "img/Malibu/hotspot/rear-view/Rearlights_Rear.jpg",
            alt : "Malibu Midsize Sedan Photo:Rear-lights"
        },
        sunroof : {
            title: "The Sunroof",
            body : "Panoramic Sunroof",
            image : "img/Malibu/hotspot/side-open/Sunroof_Sideopen.jpg",
            alt : "Malibu Midsize Sedan Photo:Panoramic Sunroof"
        },
        trunk : {
            title: "The Trunk",
            body : "Trunk Capacity 447L",
            image : "img/Malibu/hotspot/rear-view/Trunk_Rear.jpg",
            alt : "Malibu Midsize Sedan Photo:Trunk Interior"
        },
        camera : {
            title: "The Rear Camera",
            body : "High Definition Rear Vision Camera<br>Rear Parking Sensors",
            image : "img/Malibu/hotspot/rear-view/Camera_Rear.jpg",
            alt : "Malibu Midsize Sedan Photo:Rear Vision Camera"
        },
        wheel : {
            title: "The Wheels",
            body : "18\" Alloy Wheels<br>245/45R18 Tires<br>Anti-Lock Braking System (ABS)<br>Electronic Brakeforce Distribution (EBD)<br>Electronic Stability Control (ESC)<br>Traction Control<br>Electric Park Brakes<br>Hill Assist + Extend Mode",
            image : "img/Malibu/hotspot/side-open/Wheels_Sideopen.jpg",
            alt : "Malibu Midsize Sedan Photo:Wheel"
        },
        seating : {
            title: "The Seating",
            body : "Leather Seats<br>Heated/Ventilated Front Seats<br>Power Driver Seat 8 Ways<br>Power Passenger Seat 6 Ways<br>Memory Setting Driver Seat<br>Power Lumbar Support Front Seats<br>Front and Rear Arm Rest<br>Rear Seats Folding 40/60<br>ISOFIX<br>",
            image : "img/Malibu/hotspot/Interior/Seats_Interior.jpg",
            alt : "Malibu Midsize Sedan Photo:Interior Seating"
        },
        key : {
            title: "The Stop/Start Button",
            body : "Start/Stop Button<br>Remote Engine Start<br>Remote Keyless Entry with Alarm & Trunk Opening",
            image : "img/Malibu/hotspot/Interior/PushButton_Interior.jpg",
            alt : "Malibu Midsize Sedan Photo:Start Push Button"
        },
        touchscreen : {
            title: "The Touchscreen",
            body : "Chevrolet Mylink 8-Inch Color Touch Screen<br>Apple CarPlay/ Android Auto<br>Bluetooth<br>6 Speakers<br>USB + Mini USB Type-C + AUX + 12V Outlet<br>Climate Control<br>Dual Zone AC<br>Active Noise Cancellation",
            image : "img/Malibu/hotspot/Interior/Touchscreen_Interior.jpg",
            alt : "Malibu Midsize Sedan Photo:Touchscreen"
        },
        outlet : {
            title: "The Power Outlet",
            body : "230V Power Outlet<br>Rear Air Condition Ducts",
            image : "img/Malibu/hotspot/Interior/Power_Interior.jpg",
            alt : "Malibu Midsize Sedan Photo:Power Outlet"
        },
        dashboard : {
            title: "The Dashboard",
            body : "Multifunction Tilting/Telescoping leather<br>Steering Wheel<br>Cruise Control<br>Electric Power Steering<br>6 Airbags<br>Automatic Air-Conditioning<br>Dual Zone AC<br>Glovebox Cooling<br>3.5-inch Dashboard Display with:<ul><li>Digital Speedometer</li><li>Tire Pressure Monitoring System</li><li>Fuel Consumption Indicator</li></ul>",
            image : "img/Malibu/hotspot/Interior/Dashboard_Interior.jpg",
            alt : "Malibu Midsize Sedan Photo:Dashboard"
        },
    }

    
}



    // Add down arrow icon for collapse element which is open by default
    $(".collapse.show").each(function () {
        $(this).prev(".card-header").find(".fa").addClass("fa-angle-down").removeClass("fa-angle-right");
    });

    // Toggle right and down arrow icon on show hide of collapse element
    $(".collapse").on('show.bs.collapse', function () {
        $(this).prev(".card-header").find(".fa").removeClass("fa-angle-right").addClass("fa-angle-down");
    }).on('hide.bs.collapse', function () {
        $(this).prev(".card-header").find(".fa").removeClass("fa-angle-down").addClass("fa-angle-right");
    });



AFRAME.registerComponent('clickhandler', {
    init: function () {
        this.el.addEventListener('click', () => {
            console.log("clicked.")
            document.getElementById('scene1').setAttribute('visible',false)
            document.getElementById('scene1').setAttribute('visible', 'false');
            $(".scene1").attr("visible", "false")
            $("#clickx").removeAttr("clickhandler")
            // document.getElementById('scene2').setAttribute('visible', 'true');
        });
    }
});
console.log("debugging")
var checker = 0;

AFRAME.registerComponent('modal-event', {
    init: function () {
        console.log("registered event!");
        this.el.addEventListener('click', () => {
            if(isMobile()){
                if(checker == 0){
                    checker = 1;
                }else{
                    checker = 0;
                    return;
                }
            }
            
            var id = this.el.getAttribute('part');
            var carline = this.el.getAttribute('carline');
            console.log(setup[carline][id]);
            $(".popimg").find('img').attr('src',"img/loading2.gif")

            setTimeout(() => {
                $(".popimg").find('img').attr('src',setup[carline][id].image)
                
            }, 200);

            $("#popup-title").html(setup[carline][id].title);
            $("#popup-msg").html(setup[carline][id].body);

            $("#myDialog").modal('show');

        });
    }
});

AFRAME.registerComponent('clickcaptiva', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"129 1.6 -3591.856","collapseOne",ascene);
                }else{
                        checker=0;
                }
            }else{
                moveCameraNav(nav,"129 1.6 -3591.856","collapseOne",ascene);
            }
            
        });
    }

});

AFRAME.registerComponent('clickcaptivaside', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"547.900 1.6 -4403.097","collapseOne",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"547.900 1.6 -4403.097","collapseOne",ascene);
            }

        });
    }
}); 

AFRAME.registerComponent('clickcaptivarear', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"1473.976 1.6 -5130.855","collapseOne",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"1473.976 1.6 -5130.855","collapseOne",ascene);
            }

        });
    }
}); 

AFRAME.registerComponent('clickcaptivadoor', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"547.910 1.6 -5469.860","collapseOne",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"547.910 1.6 -5469.860","collapseOne",ascene);
            }

        });
    }
}); 
AFRAME.registerComponent('clickcaptivainterior', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"537.928 1.6 -6489.795","collapseOne",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"537.928 1.6 -6489.795","collapseOne",ascene);
            }

        });
    }
}); 


function moveCameraNav(nav,location,collapse,ascene){
    $(".active").removeClass('active');
    console.log("ascene moveCam",ascene)
    
    document.getElementById('scene1').setAttribute('visible',false);
    
    document.getElementById('sceneOptra').setAttribute('visible',false);
    document.getElementById('sceneOptraSide').setAttribute('visible',false);
    document.getElementById('sceneOptraRear').setAttribute('visible',false);
    document.getElementById('sceneOptra').setAttribute('visible',false);
    document.getElementById('sceneOptraInterior').setAttribute('visible',false);
    document.getElementById('sceneOptraDoor').setAttribute('visible',false);

    document.getElementById('sceneMalibu').setAttribute('visible',false);
    document.getElementById('sceneMalibuSide').setAttribute('visible',false);
    document.getElementById('sceneMalibuRear').setAttribute('visible',false);
    document.getElementById('sceneMalibu').setAttribute('visible',false);
    document.getElementById('sceneMalibuInterior').setAttribute('visible',false);
    document.getElementById('sceneMalibuDoor').setAttribute('visible',false);

    document.getElementById('sceneCaptiva').setAttribute('visible',false);
    document.getElementById('sceneCaptivaSide').setAttribute('visible',false);
    document.getElementById('sceneCaptivaRear').setAttribute('visible',false);
    document.getElementById('sceneCaptiva').setAttribute('visible',false);
    document.getElementById('sceneCaptivaInterior').setAttribute('visible',false);
    document.getElementById('sceneCaptivaDoor').setAttribute('visible',false);

    // document.getElementById('allMalibu').setAttribute('visible',false);
    // document.getElementById('allCaptiva').setAttribute('visible',false);



    setTimeout(() => {
        document.getElementById(ascene).setAttribute('visible',true);
        console.log(ascene,"to be shown!")
    }, 1000);

    console.log('nav',nav);
    moveCamera("#cam",location);
    $("#"+collapse).collapse('show');
    $(".pages").find('p').removeClass('active');
    $("."+nav).find('p').addClass('active');

    // document.querySelector("#cam").object3D.rotation.set(0, 180, 0);


    var camera = document.querySelector("a-camera");
    camera.components["look-controls"].pitchObject.rotation.x = 0;
    camera.components["look-controls"].yawObject.rotation.y = 0;
    // resetView(document.querySelector("#cam"))
    console.log("rotating!!!")
    console.log(camera.components["look-controls"])

}

function resetView(el){
    el.setAttribute('look-controls','false');
    el.setAttribute('rotation',{x:0,y:0,z:0});
    el.setAttribute('look-controls','true');
  }





AFRAME.registerComponent('clickoptra', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log("scene to show",ascene)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"-825.412 1.6 -643.517","collapseThree",ascene);

                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"-825.412 1.6 -643.517","collapseThree",ascene);
            }

        });
    }
}); 


AFRAME.registerComponent('clickoptraside', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"-690.543 1.6 -1507.702","collapseThree",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"-690.543 1.6 -1507.702","collapseThree",ascene);
            }

        });
    }
}); 
AFRAME.registerComponent('clickoptradoor', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"-123.883 1.6 -2273.736","collapseThree",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"-123.883 1.6 -2273.736","collapseThree",ascene);
            }

        });
    }
}); 
AFRAME.registerComponent('clickoptrainterior', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"-1181.444 1.6 -2495.945","collapseThree",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"-1181.444 1.6 -2495.945","collapseThree",ascene);
            }

        });
    }
}); 

AFRAME.registerComponent('clickoptrarear', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"502.095 1.6 -1629.661","collapseThree",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"502.095 1.6 -1629.661","collapseThree",ascene);
            }

        });
    }
}); 















AFRAME.registerComponent('clickmalibu', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"873.260 1.600 -250.207","collapseTwo",ascene);
                }else{
                        checker=0;
                }
            }else{
                moveCameraNav(nav,"873.260 1.600 -250.207","collapseTwo",ascene);
            }

        });
    }
});


AFRAME.registerComponent('clickmalibuside', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"1501.368 1.6 -967.829","collapseTwo",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"1501.368 1.6 -967.829","collapseTwo",ascene);
            }

        });
    }
}); 

AFRAME.registerComponent('clickmaliburear', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"2833.050 1.6 -1156.517","collapseTwo",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"2833.050 1.6 -1156.517","collapseTwo",ascene);
            }

        });
    }
}); 

AFRAME.registerComponent('clickmalibudoor', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"1546.356 1.6 -1894.710","collapseTwo",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"1546.356 1.6 -1894.710","collapseTwo",ascene);
            }

        });
    }
}); 
AFRAME.registerComponent('clickmalibuinterior', {
    init: function () {
        this.el.addEventListener('click', (t) => {
            var nav = this.el.getAttribute('nav');
            var ascene = this.el.getAttribute('ascene');
            console.log(t)
            if(isMobile()){
                if(checker == 0){
                    $("#closenav").click();
                    checker =1;
                    moveCameraNav(nav,"2278.055 1.6 -2677.243","collapseTwo",ascene);
                }else{
                        checker=0;
                    console.log("testing",checker)

                }
            }else{
                moveCameraNav(nav,"2278.055 1.6 -2677.243","collapseTwo",ascene);
            }

        });
    }
}); 



// function nextScene() {
//     console.log('click')
    // document.getElementById('scene1').setAttribute('visible', 'false')
    // document.getElementById('scene2').setAttribute('visible', 'true')
// }






function isMobile(){
    if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
    return true;
    }
}

function moveCamera(xcam, position){
    document.querySelector(xcam).setAttribute('animation', 'property: position; to: '+position+';dur: 700; ');
}
function moveRotation(cam, position){
    document.querySelector(cam).setAttribute('animation', 'property: rotation; to: '+position+';dur: 700; ');
}


$(function(){
var myElement = document.getElementById('bodyx');

window.addEventListener("wheel", event => {
    const delta = Math.sign(event.wheelDelta);

    var mycam = document.getElementById('cam').getAttribute('camera');


    var finalZoom = document.getElementById('cam').getAttribute('camera').zoom + delta;
    if (finalZoom < 1)
        finalZoom = 1;
    if (finalZoom > 5)
        finalZoom = 5;

    mycam.zoom = finalZoom;

    document.getElementById('cam').setAttribute('camera', mycam);
    $("#cam").removeAttr("looks-control")

});

var mc = new Hammer.Manager(myElement);

var pinch = new Hammer.Pinch();
// pinch.recognizeWith(rotate);
mc.add([pinch]);

var delayer = 0;
mc.on("pinch", function (ev) {
    console.log("pinch")
    
   
    var delta;
    if (ev.additionalEvent == "pinchin") {
        delta = -.08;
    } else {
        delta = .08;
    }

    // console.log()
    var position = document.getElementById('cam').getAttribute('position');
    var mycam = document.getElementById('cam').getAttribute('camera');
    var finalZoom = document.getElementById('cam').getAttribute('camera').zoom + delta; 
    console.log(finalZoom);
    if (finalZoom < 1)
        finalZoom = 1;
    if (finalZoom > 5)
        finalZoom = 5;

    mycam.zoom = finalZoom;
    console.log(mycam,"final zoom")

    // document.getElementById('cam').setAttribute('position', position);
    // document.getElementById('cam').setAttribute('camera', mycam);
    // delayer++;

    var camera = document.querySelector('#cam');
    camera.setAttribute('camera', 'zoom', finalZoom);

});

 

$("#navWelcome").on('click',function(){
    $("#myDialog").modal('hide');


    
    document.getElementById('sceneOptra').setAttribute('visible',false);
    document.getElementById('sceneOptraSide').setAttribute('visible',false);
    document.getElementById('sceneOptraRear').setAttribute('visible',false);
    document.getElementById('sceneOptra').setAttribute('visible',false);
    document.getElementById('sceneOptraInterior').setAttribute('visible',false);
    document.getElementById('sceneOptraDoor').setAttribute('visible',false);

    document.getElementById('sceneMalibu').setAttribute('visible',false);
    document.getElementById('sceneMalibuSide').setAttribute('visible',false);
    document.getElementById('sceneMalibuRear').setAttribute('visible',false);
    document.getElementById('sceneMalibu').setAttribute('visible',false);
    document.getElementById('sceneMalibuInterior').setAttribute('visible',false);
    document.getElementById('sceneMalibuDoor').setAttribute('visible',false);

    document.getElementById('sceneCaptiva').setAttribute('visible',false);
    document.getElementById('sceneCaptivaSide').setAttribute('visible',false);
    document.getElementById('sceneCaptivaRear').setAttribute('visible',false);
    document.getElementById('sceneCaptiva').setAttribute('visible',false);
    document.getElementById('sceneCaptivaInterior').setAttribute('visible',false);
    document.getElementById('sceneCaptivaDoor').setAttribute('visible',false);


    setTimeout(() => {
        document.querySelector("#scene1").setAttribute('visible', 'true');
    },1000);


    moveCamera("#cam", 'position="0 1.6 200"');
    $(".pages").find('p').removeClass('active');
    $(this).find('p').addClass('active')
    $(".collapse").collapse("hide");
    if(isMobile()){
        $("#closenav").click();
    }
    var camera = document.querySelector("a-camera");
    camera.components["look-controls"].pitchObject.rotation.x = 0;
    camera.components["look-controls"].yawObject.rotation.y = 0;
});



$(".pages").click(function(){
    console.log("pages!")
    $("#myDialog").modal('hide');

    var nav = $(this).attr('data-nav');
    var ascene = $(this).attr('data-scene');
    $(".pages").find('p').removeClass('active');

    if(isMobile()){
        $("#closenav").click();
    }
    if(nav == 'OptraFront'){
        moveCameraNav(nav,"-825.412 1.6 -643.517","collapseThree",ascene);
    }else if(nav == 'OptraSide'){
        moveCameraNav(nav,"-690.543 1.6 -1507.702","collapseThree",ascene);
    }else if(nav == 'OptraRear'){
        moveCameraNav(nav,"502.095 1.6 -1629.661","collapseThree",ascene);

    }else if(nav == 'OptraOpen'){
        moveCameraNav(nav,"-123.883 1.6 -2273.736","collapseThree",ascene);
    }else if(nav == 'OptraInterior'){
        moveCameraNav(nav,"-1181.444 1.6 -2495.945","collapseThree",ascene);
    }

    else if(nav == 'CaptivaFront'){
         moveCameraNav(nav,"129 1.6 -3591.856","collapseOne",ascene);
    }else if(nav == 'CaptivaSide'){
        moveCameraNav(nav,"547.900 1.6 -4403.097","collapseOne",ascene);
    }else if(nav == 'CaptivaRear'){
        moveCameraNav(nav,"1473.976 1.6 -5130.855","collapseOne",ascene);
    }else if(nav == 'CaptivaOpen'){
        moveCameraNav(nav,"547.910 1.6 -5469.860","collapseOne",ascene);
    }else if(nav == 'CaptivaInterior'){
        moveCameraNav(nav,"537.928 1.6 -6489.795","collapseOne",ascene);
    }
        

    else if(nav == 'MalibuFront'){
         moveCameraNav(nav,"873.260 1.600 -250.207","collapseTwo",ascene);
    }else if(nav == 'MalibuSide'){
        moveCameraNav(nav,"1546.356 1.6 -1028.071","collapseTwo",ascene);
    }else if(nav == 'MalibuRear'){
        moveCameraNav(nav,"2833.050 1.6 -1156.517","collapseTwo",ascene);
    }else if(nav == 'MalibuOpen'){
        moveCameraNav(nav,"1546.356 1.6 -1894.710","collapseTwo",ascene);
    }else if(nav == 'MalibuInterior'){
        moveCameraNav(nav,"2278.055 1.6 -2677.243","collapseTwo",ascene);
    }

    
});

$(".MalibuFront").click(function(){
    if(isMobile()){
        $("#closenav").click();
    }
});

$(".CaptivaFront").click(function(){
    if(isMobile()){
        $("#closenav").click();
    }
});






});



